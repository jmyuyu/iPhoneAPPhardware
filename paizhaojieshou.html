<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
<title></title>
<script src="js/mui.min.js"></script>
<link href="css/mui.min.css" rel="stylesheet"/>
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=NtzDQh7cbSXrTtZideGgCQb4"></script>
<style type="text/css">
	#out{width:90vw;height:70vh;border:1px solid #000;margin:10px auto;}
</style>
</head>
<body>
	<header class="mui-bar mui-bar-nav">
	    <h1 class="mui-title">拍照</h1>
	</header>
	<div class="mui-content">
		<div id="out"></div>
		<p id="con"></p>
	    <button type="button" class="mui-btn mui-btn-blue" id="btn">开始</button>
	    <button type="button" class="mui-btn mui-btn-blue" id="btn1">结束</button>
	</div>	
</body>
<script type="text/javascript" charset="utf-8">
var out=document.getElementById('out')
var btn=document.getElementById('btn')
var btn1=document.getElementById('btn1')
var con=document.getElementById('con')
var watchId,r,scan,text,volume=0;

document.addEventListener('plusready', function(){
	var cmr = plus.camera.getCamera();
	var res = cmr.supportedImageResolutions[0];
	var fmt = cmr.supportedImageFormats[0];
	
	btn.addEventListener('tap',function(){
	
		cmr.captureImage(successCB,errorCB,{resolution:res,format:fmt});

//		plus.navigator.setStatusBarBackground('#FF0000');


	},false)	
	
	btn1.addEventListener('tap',function(){

	},false)
		
},false);


function successCB(a){
		//获取url对象
		plus.io.resolveLocalFileSystemURL( a, function(entry){
			setimg(entry.toLocalURL())	
		}, function(){	
		} );	
}

function setimg(str){
	out.style.backgroundImage='url('+str+')';
	out.style.backgroundSize='cover';
}


function errorCB(){
	alert('失败')
}


</script>
</html>